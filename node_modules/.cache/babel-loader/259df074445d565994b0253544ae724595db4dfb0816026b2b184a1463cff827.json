{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eli.leblanc/Documents/Eli/repos/beu-split/my-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/eli.leblanc/Documents/Eli/repos/beu-split/my-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"/Users/eli.leblanc/Documents/Eli/repos/beu-split/my-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/eli.leblanc/Documents/Eli/repos/beu-split/my-app/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"/Users/eli.leblanc/Documents/Eli/repos/beu-split/my-app/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/eli.leblanc/Documents/Eli/repos/beu-split/my-app/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React,{Component}from'react';import{Button,Form,Input,message}from'antd';import\"antd/dist/antd.min.css\";import bcrypt from'bcryptjs';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LoginComponent=/*#__PURE__*/function(_Component){_inherits(LoginComponent,_Component);var _super=_createSuper(LoginComponent);function LoginComponent(){var _this;_classCallCheck(this,LoginComponent);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.onFinish=function(credentials){var username=credentials.username;var password=credentials.password;var hashedPassword=bcrypt.hashSync(password,'$2a$10$CwTycUXWue0Thq9StjUM0u');// hash created previously created upon sign up\nvar body=JSON.stringify({username:username,password:hashedPassword});fetch('/api/credentials',{method:'POST',headers:{Accept:'application/json','Content-Type':'application/json'},body:body}).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return res;case 3:if(res.status!==200){message.error('Pseudonyme ou mot de passe incorrect');}else{_this.props.login();}_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 9:;case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(err){console.log(err);});};_this.onFinishFailed=function(errorInfo){console.log('Failed:',errorInfo);};return _this;}_createClass(LoginComponent,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(Form,{labelCol:{span:8},wrapperCol:{span:16},initialValues:{remember:true},onFinish:this.onFinish,onFinishFailed:this.onFinishFailed,autoComplete:\"off\",children:[/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsx(\"label\",{style:{color:\"white\"},children:\"Pseudonyme\"}),name:\"username\",rules:[{required:true,message:'Entrez votre pseudonyme!'}],children:/*#__PURE__*/_jsx(Input,{})}),/*#__PURE__*/_jsx(Form.Item,{label:/*#__PURE__*/_jsx(\"label\",{style:{color:\"white\"},children:\"Mot de passe\"}),name:\"password\",rules:[{required:true,message:'Entrez votre mot de passe!'}],children:/*#__PURE__*/_jsx(Input.Password,{style:{color:'white'}})}),/*#__PURE__*/_jsx(Form.Item,{wrapperCol:{offset:8,span:16},children:/*#__PURE__*/_jsx(Button,{type:\"primary\",htmlType:\"submit\",children:\"Se connecter\"})})]})});}}]);return LoginComponent;}(Component);","map":{"version":3,"names":["React","Component","Button","Form","Input","message","bcrypt","LoginComponent","onFinish","credentials","username","password","hashedPassword","hashSync","body","JSON","stringify","fetch","method","headers","Accept","then","res","status","error","props","login","console","log","catch","err","onFinishFailed","errorInfo","span","remember","color","required","offset"],"sources":["/Users/eli.leblanc/Documents/Eli/repos/beu-split/my-app/src/components/login-component.js"],"sourcesContent":["import React, { Component } from 'react';\n\nimport { Button, Form, Input, message } from 'antd';\n\nimport \"antd/dist/antd.min.css\";\nimport bcrypt from 'bcryptjs';\n\nexport class LoginComponent extends Component {\n\n    onFinish = (credentials) => {\n        const username = credentials.username;\n        const password = credentials.password;\n        const hashedPassword = bcrypt.hashSync(password, '$2a$10$CwTycUXWue0Thq9StjUM0u') // hash created previously created upon sign up\n        const body = JSON.stringify({\n            username: username,\n            password: hashedPassword,\n        });\n        fetch('/api/credentials', {\n            method: 'POST',\n            headers: {\n                Accept: 'application/json',\n                'Content-Type': 'application/json',\n            },\n            body: body,\n        }).then(async res => {\n            try {\n                await res;\n                if (res.status !== 200) {\n                    message.error('Pseudonyme ou mot de passe incorrect');\n                } else {\n                    this.props.login();\n                }\n            } catch (err) {\n                console.log(err);\n            };\n        })\n            .catch(err => {\n                console.log(err);\n            });\n    };\n\n    onFinishFailed = (errorInfo) => {\n        console.log('Failed:', errorInfo);\n    };\n\n    render() {\n        return (\n            <div>\n                <Form\n                    labelCol={{\n                        span: 8,\n                    }}\n                    wrapperCol={{\n                        span: 16,\n                    }}\n                    initialValues={{\n                        remember: true,\n                    }}\n                    onFinish={this.onFinish}\n                    onFinishFailed={this.onFinishFailed}\n                    autoComplete=\"off\"\n                >\n                    {/* Pseudonyme */}\n                    <Form.Item\n                        label={<label style={{ color: \"white\" }}>Pseudonyme</label>}\n                        name=\"username\"\n                        rules={[\n                            {\n                                required: true,\n                                message: 'Entrez votre pseudonyme!',\n                            },\n                        ]}\n                    >\n                        <Input />\n                    </Form.Item>\n                    {/* Mot de passe */}\n                    <Form.Item\n\n                        label={<label style={{ color: \"white\" }}>Mot de passe</label>}\n                        name=\"password\"\n                        rules={[\n                            {\n                                required: true,\n                                message: 'Entrez votre mot de passe!',\n                            },\n                        ]}\n                    >\n                        <Input.Password style={{ color: 'white' }} />\n                    </Form.Item>\n                    {/* Se connecter */}\n                    <Form.Item\n                        wrapperCol={{\n                            offset: 8,\n                            span: 16,\n                        }}\n                    >\n                        <Button type=\"primary\" htmlType=\"submit\">\n                            Se connecter\n                        </Button>\n                    </Form.Item>\n                </Form>\n            </div>\n        )\n    }\n}"],"mappings":"80BAAA,MAAOA,MAAK,EAAIC,SAAS,KAAQ,OAAO,CAExC,OAASC,MAAM,CAAEC,IAAI,CAAEC,KAAK,CAAEC,OAAO,KAAQ,MAAM,CAEnD,MAAO,wBAAwB,CAC/B,MAAOC,OAAM,KAAM,UAAU,CAAC,wFAE9B,UAAaC,eAAc,2VAEvBC,QAAQ,CAAG,SAACC,WAAW,CAAK,CACxB,GAAMC,SAAQ,CAAGD,WAAW,CAACC,QAAQ,CACrC,GAAMC,SAAQ,CAAGF,WAAW,CAACE,QAAQ,CACrC,GAAMC,eAAc,CAAGN,MAAM,CAACO,QAAQ,CAACF,QAAQ,CAAE,+BAA+B,CAAC,CAAC;AAClF,GAAMG,KAAI,CAAGC,IAAI,CAACC,SAAS,CAAC,CACxBN,QAAQ,CAAEA,QAAQ,CAClBC,QAAQ,CAAEC,cACd,CAAC,CAAC,CACFK,KAAK,CAAC,kBAAkB,CAAE,CACtBC,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACLC,MAAM,CAAE,kBAAkB,CAC1B,cAAc,CAAE,kBACpB,CAAC,CACDN,IAAI,CAAEA,IACV,CAAC,CAAC,CAACO,IAAI,4FAAC,iBAAMC,GAAG,0JAEHA,IAAG,QACT,GAAIA,GAAG,CAACC,MAAM,GAAK,GAAG,CAAE,CACpBlB,OAAO,CAACmB,KAAK,CAAC,sCAAsC,CAAC,CACzD,CAAC,IAAM,CACH,MAAKC,KAAK,CAACC,KAAK,EAAE,CACtB,CAAC,8EAEDC,OAAO,CAACC,GAAG,aAAK,CAAC,OACpB,CAAC,oEACL,+DAAC,CACGC,KAAK,CAAC,SAAAC,GAAG,CAAI,CACVH,OAAO,CAACC,GAAG,CAACE,GAAG,CAAC,CACpB,CAAC,CAAC,CACV,CAAC,OAEDC,cAAc,CAAG,SAACC,SAAS,CAAK,CAC5BL,OAAO,CAACC,GAAG,CAAC,SAAS,CAAEI,SAAS,CAAC,CACrC,CAAC,gEAED,iBAAS,CACL,mBACI,kCACI,MAAC,IAAI,EACD,QAAQ,CAAE,CACNC,IAAI,CAAE,CACV,CAAE,CACF,UAAU,CAAE,CACRA,IAAI,CAAE,EACV,CAAE,CACF,aAAa,CAAE,CACXC,QAAQ,CAAE,IACd,CAAE,CACF,QAAQ,CAAE,IAAI,CAAC1B,QAAS,CACxB,cAAc,CAAE,IAAI,CAACuB,cAAe,CACpC,YAAY,CAAC,KAAK,wBAGlB,KAAC,IAAI,CAAC,IAAI,EACN,KAAK,cAAE,cAAO,KAAK,CAAE,CAAEI,KAAK,CAAE,OAAQ,CAAE,wBAAoB,CAC5D,IAAI,CAAC,UAAU,CACf,KAAK,CAAE,CACH,CACIC,QAAQ,CAAE,IAAI,CACd/B,OAAO,CAAE,0BACb,CAAC,CACH,uBAEF,KAAC,KAAK,IAAG,EACD,cAEZ,KAAC,IAAI,CAAC,IAAI,EAEN,KAAK,cAAE,cAAO,KAAK,CAAE,CAAE8B,KAAK,CAAE,OAAQ,CAAE,0BAAsB,CAC9D,IAAI,CAAC,UAAU,CACf,KAAK,CAAE,CACH,CACIC,QAAQ,CAAE,IAAI,CACd/B,OAAO,CAAE,4BACb,CAAC,CACH,uBAEF,KAAC,KAAK,CAAC,QAAQ,EAAC,KAAK,CAAE,CAAE8B,KAAK,CAAE,OAAQ,CAAE,EAAG,EACrC,cAEZ,KAAC,IAAI,CAAC,IAAI,EACN,UAAU,CAAE,CACRE,MAAM,CAAE,CAAC,CACTJ,IAAI,CAAE,EACV,CAAE,uBAEF,KAAC,MAAM,EAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,QAAQ,0BAE/B,EACD,GACT,EACL,CAEd,CAAC,4BAhG+BhC,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}